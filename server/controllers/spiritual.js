'use strict';
const express = require('express');
const router = express.Router();
const bodyParser = require('body-parser');
const request = require('request');
const models = require('../../db/models');
const config = require('config')['Google_Places'];


module.exports.getAll = (req, res) => {
  models.User.where({ email: req.user.email }).fetch()
    .then((result) => {
      models.Stats.where({ city: result.attributes.destination }).fetch()
      .then((data) => {
        if (result.attributes.destination === 'san-francisco-bay-area') {
          result.attributes.destination = 'sanfrancisco';
        }
        request.get(`https://maps.googleapis.com/maps/api/geocode/json?key=${config.clientID}&address=${result.attributes.destination}`,
              (error, response, body) => {
                if (error) {
                  console.error(err);
                } else {
                  var geoCoords = JSON.parse(body).results[0].geometry['location'];
                  request.get(`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${geoCoords.lat},${geoCoords.lng}&radius=500&type=place_of_worship&key=${config.clientID}`,
                    (error, response, body) => {
                      if (error) {
                        console.error(error);
                      }
                      if ( typeof body === 'undefined' ) {
                        res.send({});
                      }
                      var body = JSON.parse(body);
                      var places = body.results;
                      var placesData = {};
                      var dataLength = 10;
                      var currentIndex = 0;
                      var validData = true;
                      if ( typeof places === 'undefined' ) {
                        res.send({});
                      } else {
                        while (places.length > 0 && dataLength > 0 && validData) {
                          var placesObj = {};
                          placesObj['name'] = places[currentIndex].name;
                          if (places[currentIndex].photos) {
                            var reference = places[currentIndex].photos[0].photo_reference;
                            placesObj['image'] = `https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=${reference}&key=${config.clientID}`;
                          } else {
                            placesObj['image'] = 'data:image/png;base64,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';
                          }
                          placesData[currentIndex] = placesObj;
                          dataLength--;
                          if (!places[currentIndex + 1]) {
                            validData = false;
                          }
                          currentIndex++;
                        }
                        res.send(placesData);
                      }
                    });
                }
              });
      });
    });
};
